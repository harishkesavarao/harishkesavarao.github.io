<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Building a data lake on Amazon Web Services. | Harish Kesava Rao</title> <meta name="author" content="Harish Kesava Rao"> <meta name="description" content="Building and deploying a data lake on AWS infrastructure."> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="http://harishkesavarao.github.io//blog/2021/aws-data-lake/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">Harish Kesava Rao</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Building a data lake on Amazon Web Services.</h1> <p class="post-meta">June 1, 2021</p> <p class="post-tags"> <a href="/blog/2021"> <i class="fas fa-calendar fa-sm"></i> 2021 </a>   ·   <a href="/blog/tag/bigdata"> <i class="fas fa-hashtag fa-sm"></i> bigdata</a>   <a href="/blog/tag/aws"> <i class="fas fa-hashtag fa-sm"></i> aws</a>   <a href="/blog/tag/data-engineering"> <i class="fas fa-hashtag fa-sm"></i> data-engineering</a>   <a href="/blog/tag/scala"> <i class="fas fa-hashtag fa-sm"></i> scala</a>   </p> </header> <article class="post-content"> <div id="table-of-contents"> <ul id="toc" class="section-nav"> <li class="toc-entry toc-h1"> <a href="#introduction">Introduction</a> <ul> <li class="toc-entry toc-h2"><a href="#what-is-a-data-lake">What is a Data Lake?</a></li> </ul> </li> <li class="toc-entry toc-h1"><a href="#use-cases">Use cases</a></li> <li class="toc-entry toc-h1"><a href="#architecture">Architecture</a></li> <li class="toc-entry toc-h1"> <a href="#data-sources">Data sources</a> <ul> <li class="toc-entry toc-h2"> <a href="#s3">S3</a> <ul> <li class="toc-entry toc-h3"><a href="#storage">Storage</a></li> <li class="toc-entry toc-h3"><a href="#retention">Retention</a></li> <li class="toc-entry toc-h3"><a href="#versioning">Versioning</a></li> <li class="toc-entry toc-h3"><a href="#security">Security</a></li> <li class="toc-entry toc-h3"><a href="#encryption">Encryption</a></li> </ul> </li> <li class="toc-entry toc-h2"> <a href="#redshift">Redshift</a> <ul> <li class="toc-entry toc-h3"><a href="#analytics">Analytics</a></li> <li class="toc-entry toc-h3"><a href="#performance-and-scaling">Performance and scaling</a></li> </ul> </li> <li class="toc-entry toc-h2"><a href="#kinesis">Kinesis</a></li> <li class="toc-entry toc-h2"><a href="#cloudwatch">Cloudwatch</a></li> </ul> </li> <li class="toc-entry toc-h1"><a href="#destination">Destination</a></li> <li class="toc-entry toc-h1"> <a href="#design-and-implementation">Design and Implementation</a> <ul> <li class="toc-entry toc-h2"> <a href="#compute">Compute</a> <ul> <li class="toc-entry toc-h3"><a href="#ec2">EC2</a></li> <li class="toc-entry toc-h3"><a href="#emr">EMR</a></li> <li class="toc-entry toc-h3"><a href="#sagemaker">SageMaker</a></li> </ul> </li> <li class="toc-entry toc-h2"> <a href="#storage-1">Storage</a> <ul> <li class="toc-entry toc-h3"><a href="#s3-1">S3</a></li> </ul> </li> <li class="toc-entry toc-h2"><a href="#security-and-permissions">Security and permissions</a></li> <li class="toc-entry toc-h2"><a href="#costs-and-scaling-updown">Costs and Scaling up/down</a></li> <li class="toc-entry toc-h2"><a href="#alerting-and-monitoring">Alerting and Monitoring</a></li> <li class="toc-entry toc-h2"><a href="#cloudwatch-1">Cloudwatch</a></li> <li class="toc-entry toc-h2"><a href="#eventbridge">Eventbridge</a></li> <li class="toc-entry toc-h2"><a href="#performance-tuning">Performance Tuning</a></li> <li class="toc-entry toc-h2"><a href="#cataloging-accuracy-and-governance">Cataloging, accuracy and governance</a></li> <li class="toc-entry toc-h2"> <a href="#analytics-1">Analytics</a> <ul> <li class="toc-entry toc-h3"><a href="#quicksight">Quicksight</a></li> <li class="toc-entry toc-h3"><a href="#sagemaker-1">Sagemaker</a></li> <li class="toc-entry toc-h3"><a href="#tableau">Tableau</a></li> </ul> </li> </ul> </li> <li class="toc-entry toc-h1"> <a href="#reference-architecture-diagram">Reference Architecture Diagram</a> <ul> <li class="toc-entry toc-h2"> <a href="#devops">DevOps</a> <ul> <li class="toc-entry toc-h3"><a href="#terraform">Terraform</a></li> <li class="toc-entry toc-h3"><a href="#aws-cdk">AWS CDK</a></li> <li class="toc-entry toc-h3"><a href="#codeapplication">Code/Application</a></li> </ul> </li> </ul> </li> <li class="toc-entry toc-h1"><a href="#conclusion">Conclusion</a></li> </ul> </div> <hr> <div id="markdown-content"> <h1 id="introduction">Introduction</h1> <h2 id="what-is-a-data-lake">What is a Data Lake?</h2> <blockquote> <p>A data lake is a centralized repository that allows you to store all your structured and unstructured data at any scale. You can store your data as-is, without having to first structure the data, and run different types of analytics—from dashboards and visualizations to big data processing, real-time analytics, and machine learning to guide better decisions.</p> </blockquote> <p>The AWS website has a good <a href="https://aws.amazon.com/what-is/data-lake/" rel="external nofollow noopener" target="_blank">article</a> which explains more about a Data Lake and how it compares to a traditional data warehouse,</p> <h1 id="use-cases">Use cases</h1> <p>It is cost effective and performant to build a Data Lake when the data volume is over a certain threshold. The threshold is usually in the tens of GBs of data per day and continues to accumulate over time. If the data volume is less than that, it would be quicker and cheaper to build a traditional data warehouse or other solutions.</p> <p>As we saw above, a Data Lake is a centralized repository which stores all of the structured and unstructured data. This means that this data is available to anyone in an organization (with the relevant permissions). This could be - Data Analysts, Data Scientists, Data Engineers, Business Analysts, Product Managers, Finance or any other function. This offers a single source of truth of the data and each sub-function or department within an organization can choose to use the data as they see fit, with their own tooling for data access, analytics and visualization.</p> <h1 id="architecture">Architecture</h1> <p>First, we will try to see the different pieces of a typical big data flow. Then, we can explore the different options available in AWS to accomodate those pieces. This will help us arrive at our actual architecture diagram which will more closely represent our actual implementation.</p> <p><code class="language-plaintext highlighter-rouge">TODO: Data Flow Diagram</code></p> <h1 id="data-sources">Data sources</h1> <p>Typically, data sources come from within AWS itself. In rare exceptions, the data comes from outside the cloud, or from another cloud provider. We will discuss both scenarios.</p> <h2 id="s3">S3</h2> <h3 id="storage">Storage</h3> <h3 id="retention">Retention</h3> <h3 id="versioning">Versioning</h3> <h3 id="security">Security</h3> <h3 id="encryption">Encryption</h3> <h2 id="redshift">Redshift</h2> <h3 id="analytics">Analytics</h3> <h3 id="performance-and-scaling">Performance and scaling</h3> <h2 id="kinesis">Kinesis</h2> <h2 id="cloudwatch">Cloudwatch</h2> <h1 id="destination">Destination</h1> <h1 id="design-and-implementation">Design and Implementation</h1> <h2 id="compute">Compute</h2> <h3 id="ec2">EC2</h3> <h3 id="emr">EMR</h3> <h3 id="sagemaker">SageMaker</h3> <h2 id="storage-1">Storage</h2> <h3 id="s3-1">S3</h3> <h2 id="security-and-permissions">Security and permissions</h2> <h2 id="costs-and-scaling-updown">Costs and Scaling up/down</h2> <h2 id="alerting-and-monitoring">Alerting and Monitoring</h2> <h2 id="cloudwatch-1">Cloudwatch</h2> <h2 id="eventbridge">Eventbridge</h2> <h2 id="performance-tuning">Performance Tuning</h2> <h2 id="cataloging-accuracy-and-governance">Cataloging, accuracy and governance</h2> <h2 id="analytics-1">Analytics</h2> <h3 id="quicksight">Quicksight</h3> <h3 id="sagemaker-1">Sagemaker</h3> <h3 id="tableau">Tableau</h3> <h1 id="reference-architecture-diagram">Reference Architecture Diagram</h1> <p><code class="language-plaintext highlighter-rouge">TODO: Architecture Diagram</code></p> <h2 id="devops">DevOps</h2> <h3 id="terraform">Terraform</h3> <h3 id="aws-cdk">AWS CDK</h3> <h3 id="codeapplication">Code/Application</h3> <h1 id="conclusion">Conclusion</h1> </div> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Harish Kesava Rao. Last updated: December 21, 2023. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>